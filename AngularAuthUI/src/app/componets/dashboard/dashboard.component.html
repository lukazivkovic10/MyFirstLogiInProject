<body>
    <nav>

        <!--sidenav component-->
        <app-sidenav></app-sidenav>
    </nav>
    <div class="page-container">
        <div class="content">
            <div class="columns">
                <div class="column is-2-desktop is-fullwidth-mobile center">
                    <h1 class="title">
                        <b>Opravila</b>
                    </h1>
                </div>

                <div class="column is-fullwidth-mobile">
                    <div class="columns is-mobile" *ngIf="searchData.search === '' || searchData.search === null">
                        <div class="column center">
                            <button class="button" id="page" (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1">Previous</button>
                        </div>
                        <div class="column center">
                            <b class="pt-2">Page {{currentPage}} of {{totalPages}}</b>
                        </div>
                        <div class="column center">
                            <button class="button" id="page" (click)="onPageChange(currentPage + 1)" [disabled]="currentPage === totalPages">Next</button>
                        </div>
                    </div>
                </div>

                <!--Button for create todo modal -->
                <div class="column is-1-desktop">
                    <button class="circle-btn" (click)="modelOpenCreate()">
                        <span class="icon fas fa-fw">
                            <i class="fa-solid fa-calendar-plus fa-2x"></i>
                        </span>
                    </button>
                </div>
            </div>
            <!--Shows the searched item as tag-->
            <div *ngIf="searchData.search!''" class="tag is-link is-medium is-rounded">
                {{searchData.search}}
                <button (click)="loadItems()" class="delete py-1"></button>
            </div>
        </div>
        <div class="content">
            <div class="pt-3" *ngFor="let item of items.data">

                <!--Shows the tag titles-->
                <div class="box title-box" *ngIf="item.tag!=savedTag">
                    <div class="tooltip" data-tooltip="Ime oznake">
                        <h2 class="title is-2 has-text-white-bis">
                            {{item.tag}}
                            {{saveTag(item.tag)}} 
                        </h2>
                    </div>
                </div>

                <!--Show create todo modal-->
                <app-model-content *ngIf="showModalCreate" (close)="modelCloseCreate()"></app-model-content>

                <!--Show delete todo modal-->
                <app-model-content-delete *ngIf="showModalDelete" (close)="modelCloseDelete()"></app-model-content-delete>

                <!--Show edit todo modal-->
                <app-model-content-edit *ngIf="showModalEdit" (close)="modelCloseEdit()"></app-model-content-edit>

                <!--Show create tag modal-->
                <app-model-tags *ngIf="showModalTags" (close)="modelCloseTags()"></app-model-tags>

                <!--todo card component-->
                <app-todo-card 
                [item]="item" 
                [item_Tag]="item.tag" 
                [item_ItemName]="item.itemName" 
                [item_ItemDesc]="item.itemDesc" 
                [item_ItemStatus]="item.itemStatus" 
                [item_Active]="item.active" 
                [item_completeDate]="item.completeDate" 
                [item_dateOfCompletion]="item.dateOfCompletion"
                [hideDeletedCards]="hideDeletedCards"
                [hideDoneCards]="hideDoneCards"
                [hideExpiredCards]="hideExpiredCards"
                [hideNotDoneCards]="hideNotDoneCards"
                >
                </app-todo-card>
            </div>

            <div class="columns pt-3 is-mobile" *ngIf="searchData.search === '' || searchData.search === null">
                <div class="column center">
                    <button class="button" id="page" (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1">Previous</button>
                </div>
                <div class="column center">
                    <b class="pt-2">Page {{currentPage}} of {{totalPages}}</b>
                </div>
                <div class="column center">
                    <button class="button" id="page" (click)="onPageChange(currentPage + 1)" [disabled]="currentPage === totalPages">Next</button>
                </div>
            </div>
        </div>
    </div>
</body>